<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="content">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Encabezado -->
        <div class="bg-white p-6 rounded-lg shadow-md mb-6 border-l-4 border-blue-500">
            <h1 class="text-3xl font-bold text-gray-800" th:text="'Evaluar Oposición: ' + ${prueba.titulo}"></h1>
            <p class="text-gray-600 mt-2">Estudiante: <span class="font-semibold" th:text="${prueba.postulacion.estudiante.nombres} + ' ' + ${prueba.postulacion.estudiante.apellidos}"></span></p>
            <p class="text-gray-600">Asignatura: <span class="font-semibold" th:text="${prueba.postulacion.asignatura.nombre}"></span></p>
        </div>

        <!-- Formulario de Evaluación -->
        <form th:action="@{/coordinador/oposicion/{id}/evaluar(id=${prueba.idOposicion})}" method="post" class="bg-white p-6 rounded-lg shadow-md">
            
            <h2 class="text-2xl font-semibold text-gray-700 mb-6">Registrar Calificaciones de Docentes</h2>

            <!-- Bloque para cada docente evaluador -->
            <div th:each="evaluacion, iterStat : ${evaluaciones}" class="mb-8 p-4 border rounded-lg">
                <h3 class="text-xl font-bold text-gray-800 mb-4" th:text="${evaluacion.docente.nombres} + ' ' + ${evaluacion.docente.apellidos}"></h3>
                
                <!-- Inputs para los puntajes -->
                <input type="hidden" th:name="'evaluaciones[' + ${iterStat.index} + '].idEval'" th:value="${evaluacion.idEval}" />
                <input type="hidden" th:name="'evaluaciones[' + ${iterStat.index} + '].docente.idDocente'" th:value="${evaluacion.docente.idDocente}" />

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-4">
                    <div>
                        <label th:for="'materialPuntos-' + ${iterStat.index}" class="block text-sm font-medium text-gray-700">Puntos por Material</label>
                        <input type="number" step="0.01" th:id="'materialPuntos-' + ${iterStat.index}" th:name="'evaluaciones[' + ${iterStat.index} + '].materialPuntos'" th:value="${evaluacion.materialPuntos}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" required>
                    </div>
                    <div>
                        <label th:for="'calidadPuntos-' + ${iterStat.index}" class="block text-sm font-medium text-gray-700">Puntos por Calidad</label>
                        <input type="number" step="0.01" th:id="'calidadPuntos-' + ${iterStat.index}" th:name="'evaluaciones[' + ${iterStat.index} + '].calidadPuntos'" th:value="${evaluacion.calidadPuntos}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" required>
                    </div>
                    <div>
                        <label th:for="'respuestasPuntos-' + ${iterStat.index}" class="block text-sm font-medium text-gray-700">Puntos por Respuestas</label>
                        <input type="number" step="0.01" th:id="'respuestasPuntos-' + ${iterStat.index}" th:name="'evaluaciones[' + ${iterStat.index} + '].respuestasPuntos'" th:value="${evaluacion.respuestasPuntos}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" required>
                    </div>
                </div>

                <!-- Input para comentarios -->
                <div>
                    <label th:for="'comentarios-' + ${iterStat.index}" class="block text-sm font-medium text-gray-700">Comentarios</label>
                    <textarea th:id="'comentarios-' + ${iterStat.index}" th:name="'evaluaciones[' + ${iterStat.index} + '].comentarios'" th:text="${evaluacion.comentarios}" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"></textarea>
                </div>
            </div>

            <!-- Botón de envío -->
            <div class="flex justify-end mt-6">
                <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    Guardar Evaluaciones y Finalizar
                </button>
            </div>
        </form>
    </div>
</div>

</body>
</html>